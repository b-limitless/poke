{"version":3,"file":"static/js/696.55e0ffa7.chunk.js","mappings":"wRAsBe,SAASA,IACtB,MAAOC,EAAkBC,IAAuBC,EAAAA,EAAAA,UAAiB,GAC3DC,GAAWC,EAAAA,EAAAA,MACXC,GAAcC,EAAAA,EAAAA,KACjBC,GAAqBA,EAAMC,UAAUA,YAGlCC,GAAWC,EAAAA,EAAAA,OACX,gBAAEC,IAAoBC,EAAAA,EAAAA,GAAe,CAAEC,gBAAgB,KAG3DC,KAAMN,EACNO,MAAOC,EACPC,UAAWC,IACTC,EAAAA,EAAAA,GAAS,CACXC,SAAU,CAAC,aACXC,QAASA,IACFV,GACEW,EAAAA,EAAAA,MADsB,GAG/BC,QAASZ,KAITa,OAAQC,EACRC,UAAWC,EACXC,QAASC,EACTd,MAAOe,IACLC,EAAAA,EAAAA,GAAY,CACdC,WAAYC,EAAAA,EACZC,SAAUA,KACHvB,GACHF,EAAS,UACX,EAEF0B,UAAYrB,IACVX,GAASiC,EAAAA,EAAAA,IAAqBtB,GAAM,IAIlCuB,EAAkBC,IACtBb,EAAuBa,EAAQC,UAAU,GAIzCzB,KAAM0B,EACNzB,MAAO0B,EACPxB,UAAWyB,IACTvB,EAAAA,EAAAA,GAAS,CACXC,SAAU,CAAC,iBAAkBpB,GAC7BqB,QAASA,KAAMsB,EAAAA,EAAAA,GAAoB3C,GACnCuB,QAA8B,OAArBvB,IAGL4C,EAAeC,IACnB5C,EAAoB4C,EAAG,EAOzB,OAJAC,EAAAA,EAAAA,YAAU,KACR3C,GAAS4C,EAAAA,EAAAA,IAAavC,GAAW,GAChC,CAACA,KAGFwC,EAAAA,EAAAA,MAACC,EAAAA,EAAQ,CAAAC,SAAA,EACPC,EAAAA,EAAAA,KAACC,EAAAA,EAAU,IACVX,IACCO,EAAAA,EAAAA,MAAA,OAAAE,SAAA,CACG,IAAI,wCACiCT,EAAoBY,eAI9DF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,eAAeT,GAAG,eAAcK,UAC3ChC,IACW,OAAXb,QAAW,IAAXA,OAAW,EAAXA,EAAakD,QAAS,IACX,OAAXlD,QAAW,IAAXA,OAAW,EAAXA,EAAamD,KAAI,CAAClB,EAAcmB,KAAQ,IAAAC,EAAA,OACtCP,EAAAA,EAAAA,KAACQ,EAAAA,EAAW,CAEVrB,QAASA,EACTD,eAAgBA,EAChBuB,QAAShB,EACTiB,gBAAiB,QACjBC,YAGG,QAHQJ,EACE,OAAXrD,QAAW,IAAXA,OAAW,EAAXA,EAAamD,KAAKlB,GAChByB,OAAOzB,EAAQC,oBAChB,IAAAmB,EAAAA,EAAI,GAEPM,QAAuB,OAAdxB,QAAc,IAAdA,EAAAA,EAAkByB,EAAAA,EAC3BC,eAAgBxB,EAChByB,aAAcA,QAZT7B,EAAQC,UAab,SAMd,C","sources":["pages/favriote/index.tsx"],"sourcesContent":["import { useMutation, useQuery } from \"@tanstack/react-query\";\nimport Template from \"common/Template/Template\";\nimport { detailsInitialState } from \"config/initial-states\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport Navigation from \"layouts/navigation/navigation\";\nimport PokemonCard from \"layouts/pokemon-card\";\nimport { addOrRemoveFromFavorite } from \"pages/api-requests/addOrRemoveFromFavorite\";\nimport {\n  fetchFevorites\n} from \"pages/api-requests/fetchFevorites\";\nimport { fetchPokemonDetails } from \"pages/api-requests/fetchPokemonDetails\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  IPokemon,\n  setFavorites,\n  toggleFavoriteAction\n} from \"slices/favoritesSlice\";\nimport { RootState } from \"store/store\";\n\n\nexport default function Home() {\n  const [hoveredPokemonId, setHoveredPokemonId] = useState<number>(1);\n  const dispatch = useDispatch();\n  const myFavorites = useSelector(\n    (state: RootState) => state.favorites.favorites\n  );\n\n  const navigate = useNavigate();\n  const { isAuthenticated } = useCurrentUser({ shouldNavigate: false });\n\n  const {\n    data: favorites,\n    error: favoritesError,\n    isLoading: favoritesLoading,\n  } = useQuery({\n    queryKey: [\"favorites\"],\n    queryFn: () => {\n      if (!isAuthenticated) return [];\n      return fetchFevorites();\n    },\n    enabled: isAuthenticated,\n  });\n\n  const {\n    mutate: toggleFavoriteMutation,\n    isPending: isPendingFavorite,\n    isError: isFavoriteError,\n    error: favoriteError,\n  } = useMutation({\n    mutationFn: addOrRemoveFromFavorite,\n    onMutate: () => {\n      if (!isAuthenticated) {\n        navigate(\"/signin\");\n      }\n    },\n    onSuccess: (data: any) => {\n      dispatch(toggleFavoriteAction(data));\n    },\n  });\n\n  const toggleFavorite = (pokemon: IPokemon) => {\n    toggleFavoriteMutation(pokemon.pokemonId);\n  };\n\n  const {\n    data: pokemonDetails,\n    error: pokemonDetailsError,\n    isLoading: pokemonDetailsLoading,\n  } = useQuery({\n    queryKey: [\"pokemonDetails\", hoveredPokemonId],\n    queryFn: () => fetchPokemonDetails(hoveredPokemonId),\n    enabled: hoveredPokemonId !== null,\n  });\n\n  const handleHover = (id: number) => {\n    setHoveredPokemonId(id);\n  };\n\n  useEffect(() => {\n    dispatch(setFavorites(favorites));\n  }, [favorites]);\n\n  return (\n    <Template>\n      <Navigation />\n      {pokemonDetailsError && (\n        <div>\n          {\" \"}\n          Error while fetching pokemon details {pokemonDetailsError.toString()}\n        </div>\n      )}\n\n      <div className=\"pokemon-list\" id=\"pokemon-list\">\n        {!favoritesLoading &&\n          myFavorites?.length > 0 &&\n          myFavorites?.map((pokemon: any, i:number) => (\n            <PokemonCard\n              key={pokemon.pokemonId}\n              pokemon={pokemon}\n              toggleFavorite={toggleFavorite}\n              onHover={handleHover}\n              backgroundColor={\"green\"}\n              myFavriotes={\n                myFavorites?.map((pokemon: IPokemon) =>\n                  Number(pokemon.pokemonId)\n                ) ?? []\n              }\n              details={pokemonDetails ?? detailsInitialState}\n              loadingDetails={pokemonDetailsLoading}\n              onMouseLeave={() => {}}\n            />\n          ))}\n      </div>\n    \n    </Template>\n  );\n}\n"],"names":["Home","hoveredPokemonId","setHoveredPokemonId","useState","dispatch","useDispatch","myFavorites","useSelector","state","favorites","navigate","useNavigate","isAuthenticated","useCurrentUser","shouldNavigate","data","error","favoritesError","isLoading","favoritesLoading","useQuery","queryKey","queryFn","fetchFevorites","enabled","mutate","toggleFavoriteMutation","isPending","isPendingFavorite","isError","isFavoriteError","favoriteError","useMutation","mutationFn","addOrRemoveFromFavorite","onMutate","onSuccess","toggleFavoriteAction","toggleFavorite","pokemon","pokemonId","pokemonDetails","pokemonDetailsError","pokemonDetailsLoading","fetchPokemonDetails","handleHover","id","useEffect","setFavorites","_jsxs","Template","children","_jsx","Navigation","toString","className","length","map","i","_myFavorites$map","PokemonCard","onHover","backgroundColor","myFavriotes","Number","details","detailsInitialState","loadingDetails","onMouseLeave"],"sourceRoot":""}